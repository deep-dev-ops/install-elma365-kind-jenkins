############################################################################################################
#                                                                                                          #
#                                       ОСНОВНЫЕ ПАРАМЕТРЫ УСТАНОВКИ                                       #
#                                                                                                          #
############################################################################################################

# ----------------------------------------------------------------------------------------------------------
# Базовый URL — локальное доменное имя (FQDN) или IP адрес сервера
# ----------------------------------------------------------------------------------------------------------
# Укажите URL по которому будет доступна система. При установке системы с указанием доменного имени в DNS
# сервере должна быть соответствующая ААА запись "myelma365.com" <-> "IP адрес машины с ELMA365". При этом
# проверяется возможность соединения по этому домену из среды kubernetes для корректной работы сервиса
# diskjockey. В случаях если это невозможно — необходимо включить hostalias для его корректной работы
# (раскомментировать параметр ELMA365_HOSTALIASES_IP).
# Эту настройку следует отключать в случае использования некоторых proxy-серверов.

ELMA365_HOST=elma1.work.local


# ----------------------------------------------------------------------------------------------------------
# Реквизиты входа суперпользователя
# ----------------------------------------------------------------------------------------------------------
# Укажите логин и пароль для входа главного администратора.

ELMA365_EMAIL=admin@mail.com
ELMA365_PASSWORD=1224


# ----------------------------------------------------------------------------------------------------------
# Выберите язык интерфейса системы
# ----------------------------------------------------------------------------------------------------------
# Укажите один из вариантов: "ru-RU", "en-US", "sk-SK".

ELMA365_LANGUAGE=ru-RU


# ----------------------------------------------------------------------------------------------------------
# Выберите редакцию
# ----------------------------------------------------------------------------------------------------------
# Укажите один из вариантов: "standard", "enterprise".
# В данной поставке выбор редакции "enterprise" предназначен для лицензирования и не включает дополнения
# расширяющие функциональные и инфраструктурные возможности приложения ELMA365.

ELMA365_EDITION=standard


# ----------------------------------------------------------------------------------------------------------
# Настройте соединение с smtp сервером
# ----------------------------------------------------------------------------------------------------------
# Укажите параметры для подключения к SMTP серверу согласно настройкам вашего почтового сервера.
# Используется для отправки приглашений новым пользователям, восстановления паролей, отправки уведомлений.

#ELMA365_SMTP_HOST=smtp.example.ru
#ELMA365_SMTP_PORT=25
#ELMA365_SMTP_FROM=noreply@example.ru
#ELMA365_SMTP_USER=noreply@example.ru
#ELMA365_SMTP_PASSWORD="password"
#ELMA365_SMTP_TLS=false


# ----------------------------------------------------------------------------------------------------------
# Настройка TLS шифрования
# ----------------------------------------------------------------------------------------------------------
# Укажите путь к SSL сертификату для домена и закрытому ключу для включения поддержки HTTPS c использованием
# SSL сертификата.
# Укажите путь к сертификату корневого CA при использовании самоподписанного сертификата.
# Внимание! В качестве базового URL укажите доменное имя, при указании IP, HTTPS работать не будет.
# Убедитесь что SSL сертификат fullchain.

#ELMA365_TLS_CRT=/etc/ssl/example.crt
#ELMA365_TLS_KEY=/etc/ssl/example.key
#ELMA365_TLS_CA=/etc/ssl/certs/exampleRootCA.pem


# ----------------------------------------------------------------------------------------------------------
# Включение модуля cert-manager
# ----------------------------------------------------------------------------------------------------------
# Если параметр ELMA365_CERTMANAGE включен, система автоматически генерирует SSL-сертификат с помощью службы
# Let's Encrypt.
# Если параметр ELMA365_CERTMANAGER_SELFSIGNED включен, создается самоподписанный SSL-сертификат.

#ELMA365_CERTMANAGER=true
#ELMA365_CERTMANAGER_SELFSIGNED=true

############################################################################################################
#                                                                                                          #
#                                    ДОПОЛНИТЕЛЬНЫЕ ПАРАМЕТРЫ УСТАНОВКИ                                    #
#                                                                                                          #
############################################################################################################

# ----------------------------------------------------------------------------------------------------------
# Настройки подключения к внешним базам данных
# ----------------------------------------------------------------------------------------------------------
# Вы можете использовать внешние компоненты для более удобного администрирования и резервного копирования.
# Подробнее читайте в статье «Подготовка внешних баз данных»

#ELMA365_DB_PSQL=postgresql://user:password@hostname:5432/databaseName
#ELMA365_DB_PSQL_RO=postgresql://user:password@hostname:5432/databaseName
#ELMA365_DB_MONGO=mongodb://user:password@hostname:27017/databaseName
#ELMA365_DB_VALKEY=redis://user:password@valkey.local:6379/databaseName
#ELMA365_DB_AMQP=amqp://user:password@hostname:5672/vhost


# ----------------------------------------------------------------------------------------------------------
# Настройки подключения к S3 хранилищу файлов
# ----------------------------------------------------------------------------------------------------------
# Укажите параметры для подключения к S3 и резервного копирования.
# Укажите в параметре ELMA365_DB_S3_DUMP_URL адрес S3 для резервного копирования в формате, если S3 в Kubernetes-кластере
# http(s)://minio.<namespace>.svc.<cluster.local>, для внешнего S3 формат http(s)://example.ru:9000
# При необходимосте отключите проверку SSL-сертификатов (раскомментировать параметр ELMA365_SKIP_SSL_VERIFY)

#ELMA365_DB_S3_ADDRESS=example.ru:9000
#ELMA365_DB_S3_BUCKET=s3elma365
#ELMA365_DB_S3_USER=user
#ELMA365_DB_S3_PASSWORD=password
#ELMA365_DB_S3_REGION=us-east-1
#ELMA365_DB_S3_METHOD=PUT
#ELMA365_DB_S3_SSL=false
#ELMA365_DB_S3_VIRTUAL_HOSTED_STYLE=false
#ELMA365_DB_S3_DUMP_URL=https://example.ru:9000
#ELMA365_SKIP_SSL_VERIFY=true


# ----------------------------------------------------------------------------------------------------------
# Настройка директорий для установки системы и создания резервных копий
# ----------------------------------------------------------------------------------------------------------
# Укажите директорию для установки системы и создания резервных копий.
# В случае установки приложения Docker через Snap, директории необходимо сменить на /mnt или /media
# (например /mnt/elma365/docker и /mnt/elma365/backup).

#ELMA365_INSTALL_DIR="/opt/elma365/docker"
#ELMA365_BACKUP_DIR="/backup"


# ----------------------------------------------------------------------------------------------------------
# Настройка hostalias
# ----------------------------------------------------------------------------------------------------------
# При установке системы с указанием доменного имени в DNS сервере должна быть соответствующая ААА запись
# "myelma365.com" <-> "IP адрес машины с ELMA365". При этом проверяется возможность соединения по этому
# домену из среды kubernetes для корректной работы сервиса diskjockey. В случаях если это невозможно —
# необходимо включить hostalias для его корректной работы (раскомментировать параметр ELMA365_HOSTALIASES_IP).
# Эту настройку следует отключать в случае использования некоторых proxy-серверов.

#ELMA365_HOSTALIASES_IP=192.168.1.10


# ----------------------------------------------------------------------------------------------------------
# Настройка режима работы сервера ELMA365 за прокси HTTPS
# ----------------------------------------------------------------------------------------------------------
#ELMA365_PROXY_WITH_SSL=true


# ----------------------------------------------------------------------------------------------------------
# Настройка режима работы сервера ELMA365 через прокси-сервер
# ----------------------------------------------------------------------------------------------------------
#HTTPS_PROXY=http://proxy_user:proxy_pass@host:port/
#HTTP_PROXY=http://proxy_user:proxy_pass@host:port/
#NO_PROXY=localhost,example.com,127.0.0.0/8,10.0.0.0/8,169.254.0.0/16,192.168.0.0/16,100.64.0.0/10,172.16.0.0/12,cluster.local,linkerd.svc
#https_proxy=http://proxy_user:proxy_pass@host:port/
#http_proxy=http://proxy_user:proxy_pass@host:port/
#no_proxy=localhost,example.com,127.0.0.0/8,10.0.0.0/8,169.254.0.0/16,192.168.0.0/16,100.64.0.0/10,172.16.0.0/12,cluster.local,linkerd.svc


# ----------------------------------------------------------------------------------------------------------
# Настройки для приватного репозитория Docker-образов
# ----------------------------------------------------------------------------------------------------------
# Укажите адрес приватного репозитория, используется при запуске установочного скрипта с ключом --offline.
# При необходимости включите создание локального приватного репозитория, для которого можно изменить директорию
# и порт (по умолчанию - 5000). В случае установки приложения Docker через Snap, директорию необходимо сменить
# на /mnt или /media (например /mnt/elma365/registry). При включении локального приватного репозитория,
# укажите IP адрес машины с ELMA365 и порт в параметре ELMA365_PRIVATE_REGISTRY_URL

#ELMA365_PRIVATE_REGISTRY_URL=example-registry.com:5000
#ELMA365_PRIVATE_REGISTRY_CREDS=user:password
#ELMA365_LOCAL_PRIVATE_REGISTRY_ENABLE=true
#ELMA365_LOCAL_PRIVATE_REGISTRY_PORT=5000
#ELMA365_LOCAL_PRIVATE_REGISTRY_DIR=/opt/elma365/registry


# ----------------------------------------------------------------------------------------------------------
# Настройки Docker
# ----------------------------------------------------------------------------------------------------------
# Для изменения подсети 172.17.0.0/16 используемой Docker по умолчанию, укажите диапазон IP-адресов в параметре
# ELMA365_DOCKER_NETWORK, также необходимо указать длину маски создаваемых сетей в параметре ELMA365_DOCKER_SUBNET_SIZE.
# Для установки собственного MTU для Docker задайте его в параметре ELMA365_DOCKER_MTU.

#ELMA365_DOCKER_NETWORK=172.25.0.0/16
#ELMA365_DOCKER_SUBNET_SIZE=22
#ELMA365_DOCKER_MTU=1450
#ELMA365_KIND_NETWORK=172.26.0.0/16
#ELMA365_KIND_SUBNET_SIZE=22
#ELMA365_PODSUBNET_CLUSTER_K8S=10.244.0.0/16
#ELMA365_SVCSUBNET_CLUSTER_K8S=10.96.0.0/16


# ----------------------------------------------------------------------------------------------------------
# Проброс портов к БД внутри Docker
# ----------------------------------------------------------------------------------------------------------
# Проброс локальных портов на порт в подах к БД PostgreSQL, MongoDB, RabbitMQ UI, Valkey, S3
# Открытые порты для доступа к СУБД должны иметь более высокую защиту от несанкционированного доступа,
# настроенными правилами брандмауэра, ограничивающие доступ только с определенных адресов.

#ELMA365_PORT_FORWARD_PSQL=5432
#ELMA365_PORT_FORWARD_MONGO=27017
#ELMA365_PORT_FORWARD_AMQP=15672
#ELMA365_PORT_FORWARD_VALKEY=6379
#ELMA365_PORT_FORWARD_S3=9000


# ----------------------------------------------------------------------------------------------------------
# Режим отладки платформы
# ----------------------------------------------------------------------------------------------------------

ELMA365_DEBUG=true


# ----------------------------------------------------------------------------------------------------------
# Включение дополнительных параметров (указывать в формате "exampleArgs1:'111' exampleArgs2:'true' exampleArgs3:22m")
# ----------------------------------------------------------------------------------------------------------

#ELMA365_EXTRA_ARGS="ELMA365_MAX_GRPC_MESSAGE_SIZE:'8388608' ELMA365_SCRIPT_COMPILE_TTL:4m"


# ----------------------------------------------------------------------------------------------------------
# Включение дополнительных feature flags (указывать в формате "exampleFlags1","exampleFlags2")
# ----------------------------------------------------------------------------------------------------------

#ELMA365_ENABLED_FEATUREFLAGS="enableModuleServices"


# ----------------------------------------------------------------------------------------------------------
# Включение модуля Аудит безопасности
# ----------------------------------------------------------------------------------------------------------
# Если параметр ELMA365_AUDIT_PSQL_URL не задан, используется встроенная база данных PostgreSQL. В случае, если
# в параметре ELMA365_DB_PSQL задана строка подключения к PostgreSQL, необходимо также в параметре ELMA365_AUDIT_PSQL_URL
# указать строку подключения к PostgreSQL. Модуль использует PostgreSQL для которого требуется установка расширений
# uuid-ossp и pg_trgm, подробнее о необходимой конфигурации PostgreSQL читайте в разделе «Базы данных».
# URL сервиса внутри кластера: http://audit.audit.svc:3000.

#ELMA365_AUDIT=true
#ELMA365_AUDIT_PSQL_URL=postgresql://user:password@hostname:5432/databaseName


# ----------------------------------------------------------------------------------------------------------
# Включение сервиса fulltextsearcher
# ----------------------------------------------------------------------------------------------------------
# Сервис обеспечивает полнотекстовый поиск по данным в системе с использованием Opensearch.
# Для работы сервиса необходимо включить параметр ELMA365_FULLTEXTSEARCHER и указать параметры подключения к серверу Opensearch.
# Настройки ниже определяют подключение к Opensearch, количество воркеров для обработки задач и объем данных для переноса.

#ELMA365_FULLTEXTSEARCHER=true
#ELMA365_TEXTEXTRACTOR=true
#ELMA365_OPENSEARCH_ADDON_INSTALL=true
#ELMA365_OPENSEARCH_ADDRESSES=http://opensearch-cluster-master.default.svc.cluster.local:9200
#ELMA365_OPENSEARCH_LOGIN=admin
#ELMA365_OPENSEARCH_PASSWORD=password
#ELMA365_ITEMS_TRANSFER_TASK_WORKERS=1
#ELMA365_ITEMS_TRANSFER_ITEMS_WORKERS=1
#ELMA365_ITEMS_TRANSFER_ITEMS_EVENTS_TRANSFER_PER_ITERATION=400
#ELMA365_ITEMS_TRANSFER_TEXT_EXTRACTOR_URL=http://textextractor:3000


# ----------------------------------------------------------------------------------------------------------
# Включение ELMA365 Hub
# ----------------------------------------------------------------------------------------------------------
# Hub связывает несколько ELMA365, позволяя обмениваться справочниками, приложениями и запускать сквозные процессы.
# Подключения к филиалам указываются в ELMA365_HUB_CONNECTIONS.

#ELMA365_HUB=true
#ELMA365_HUB_CONNECTIONS=[{"name": "prod", "type": "cluster", "id": "1234567890", "url": "https://hub.example.com/api/linkhub", "authType": "HttpNoAuth", "providerData": {}}]
